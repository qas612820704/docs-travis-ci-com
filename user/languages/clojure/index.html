<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Building a Clojure project - Travis CI</title>
<link rel="stylesheet" href="/assets/stylesheets/main.css">
<link rel="alternate" type="application/rss+xml" title="Travis CI Build Environment Updates" href="http://docs.travis-ci.com/feed.build-env-updates.xml">
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js" defer></script>
<script src="/assets/javascripts/site.js" type="text/javascript" charset="utf-8" defer></script>
<script src="/assets/javascripts/main.js" type="text/javascript" charset="utf-8" defer></script>
<script src="/assets/javascripts/prism.js" type="text/javascript" charset="utf-8" defer></script>



<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-24868285-6']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

  </head>
  <body>
    <div class="wrapper">

      <header class="top">
  <div class="row topbar">
    <h1 id="logo" class="logo">
  <a href="http://travis-ci.org/" title="Travis CI">Travis</a>
</h1>
    <nav>
      <ul id="navigation" class="navigation">
        <li><a href="http://blog.travis-ci.com">Blog</a></li>
        <li><a href="/">Docs</a></li>
        <li class="toggle"><button type="button" id="toggle-menu" class="button--teal">Menu</button></li>
      </ul>
    </nav>
  </div>
</header>


      <div id="content" class="row">

        <div id="sidebar" class="sidebar">
  <div>
    <!-- <h2>Search</h2> -->
    <div class="searchbox">
      <form>
        <input type="text" id="st-search-input" class="searchbox-input" placeholder="Search the docs" />
      </form>
      <script type="text/javascript">
      var Swiftype = window.Swiftype || {};
        (function() {
          Swiftype.key = 'tXvDDzd4fNTBnLvxfEyx';

      Swiftype.searchSearchFields = {
            "page": ["title, body, tags"]
          };
          Swiftype.autocompleteSearchFields = {
            "page": ["title, body, tags"]
          };
          /** DO NOT EDIT BELOW THIS LINE **/
          var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
          script.src = "//swiftype.com/embed.js";
          var entry = document.getElementsByTagName('script')[0];
          document.getElementsByTagName('script')[0].parentNode.insertBefore(script, entry);
        }());
      </script>
    </div>
  </div>

  <section class="sidebar-navigation">
    <nav>
      <h3>Getting Started</h3>
      <ul>
        <li><a href="/user/getting-started/">Getting Started</a></li>
        <li><a href="/user/for-beginners/">Core Concepts for Beginners</a></li>
        <li><a href="/user/customizing-the-build/">Customizing Your Build</a></li>
        <li><a href="/user/common-build-problems/">Common Build Problems</a></li>
        <li><a href="/user/speeding-up-the-build/">Speeding up the Build</a></li>
        <li><a href="/user/build-stages/">Build Stages (beta)</a></li>
        <li><a href="/user/docker/">Using Docker in your Build</a></li>
        <li><a href="/user/gui-and-headless-browsers/">Headless Testing with Browsers</a></li>
        <li><a href="/user/pull-requests/">Building Pull Requests</a></li>
        <li><a href="/user/cron-jobs/">Cron Jobs</a></li>
        <li><a href="https://github.com/travis-ci/travis#readme">Command Line Client</a></li>
      </ul>

      <h3>Installing Dependencies</h3>
      <ul>
        <li><a href="/user/installing-dependencies/">Installing Dependencies</a></li>
        <li><a href="/user/private-dependencies/">Private Dependencies</a></li>
        <li><a href="/user/database-setup/">Setting up Services and Databases</a></li>
        <li><a href="/user/caching/">Caching Dependencies</a></li>
        <li><a href="/user/ssh-known-hosts/">Adding to SSH Known Hosts</a></li>

      </ul>
      <h3>Programming Languages</h3>
      <ul>
      
        <li><a href="/user/languages/android/">Android</a></li>
      
        <li><a href="/user/languages/c/">C</a></li>
      
        <li><a href="/user/languages/csharp/">C#</a></li>
      
        <li><a href="/user/languages/cpp/">C++</a></li>
      
        <li><a href="/user/languages/clojure/">Clojure</a></li>
      
        <li><a href="/user/languages/crystal/">Crystal</a></li>
      
        <li><a href="/user/languages/d/">D</a></li>
      
        <li><a href="/user/languages/dart/">Dart</a></li>
      
        <li><a href="/user/languages/erlang/">Erlang</a></li>
      
        <li><a href="/user/languages/elixir/">Elixir</a></li>
      
        <li><a href="/user/languages/csharp/">F#</a></li>
      
        <li><a href="/user/languages/go/">Go</a></li>
      
        <li><a href="/user/languages/groovy/">Groovy</a></li>
      
        <li><a href="/user/languages/haskell/">Haskell</a></li>
      
        <li><a href="/user/languages/haxe/">Haxe</a></li>
      
        <li><a href="/user/languages/java/">Java</a></li>
      
        <li><a href="/user/languages/javascript-with-nodejs/">JavaScript <small>(with Node.js)</small></a></li>
      
        <li><a href="/user/languages/julia/">Julia</a></li>
      
        <li><a href="/user/languages/nix/">Nix</a></li>
      
        <li><a href="/user/languages/objective-c/">Objective-C</a></li>
      
        <li><a href="/user/languages/perl/">Perl</a></li>
      
        <li><a href="/user/languages/perl6/">Perl6</a></li>
      
        <li><a href="/user/languages/php/">PHP</a></li>
      
        <li><a href="/user/languages/python/">Python</a></li>
      
        <li><a href="/user/languages/r/">R</a></li>
      
        <li><a href="/user/languages/ruby/">Ruby</a></li>
      
        <li><a href="/user/languages/rust/">Rust</a></li>
      
        <li><a href="/user/languages/scala/">Scala</a></li>
      
        <li><a href="/user/languages/smalltalk/">Smalltalk</a></li>
      
        <li><a href="/user/languages/objective-c/">Swift</a></li>
      
        <li><a href="/user/languages/csharp/">Visual Basic</a></li>
      
        <li><a href="/user/languages/community-supported-languages/">Adding a language</a></li>
      </ul>

      <h3>Deployments and Uploads</h3>
      <ul>
        <li class="is-overview"><a href="/user/deployment/">Overview</a></li>
        
          <li><a href="/user/deployment/anynines/">anynines</a></li>
        
          <li><a href="/user/deployment/appfog/">Appfog</a></li>
        
          <li><a href="/user/deployment/atlas/">Atlas</a></li>
        
          <li><a href="/user/deployment/codedeploy/">AWS CodeDeploy</a></li>
        
          <li><a href="/user/deployment/elasticbeanstalk/">AWS Elastic Beanstalk</a></li>
        
          <li><a href="/user/deployment/lambda/">AWS Lambda</a></li>
        
          <li><a href="/user/deployment/opsworks/">AWS OpsWorks</a></li>
        
          <li><a href="/user/deployment/s3/">AWS S3</a></li>
        
          <li><a href="/user/deployment/azure-web-apps/">Azure Web Apps</a></li>
        
          <li><a href="/user/deployment/bintray/">bintray</a></li>
        
          <li><a href="/user/deployment/bitballoon/">BitBalloon</a></li>
        
          <li><a href="/user/deployment/bluemixcloudfoundry/">Bluemix CloudFoundry</a></li>
        
          <li><a href="/user/deployment/boxfuse/">Boxfuse</a></li>
        
          <li><a href="/user/deployment/catalyze/">Catalyze</a></li>
        
          <li><a href="/user/deployment/chefsupermarket/">Chef Supermarket</a></li>
        
          <li><a href="/user/deployment/cloud66/">Cloud 66</a></li>
        
          <li><a href="/user/deployment/cloudfoundry/">CloudFoundry</a></li>
        
          <li><a href="/user/deployment/deis/">Deis</a></li>
        
          <li><a href="/user/deployment/engineyard/">Engine Yard</a></li>
        
          <li><a href="/user/deployment/pages/">GitHub Pages</a></li>
        
          <li><a href="/user/deployment/releases/">GitHub Releases</a></li>
        
          <li><a href="/user/deployment/google-app-engine/">Google App Engine</a></li>
        
          <li><a href="/user/deployment/gcs/">Google Cloud Storage</a></li>
        
          <li><a href="/user/deployment/firebase/">Google Firebase</a></li>
        
          <li><a href="/user/deployment/hackage/">Hackage</a></li>
        
          <li><a href="/user/deployment/heroku/">Heroku</a></li>
        
          <li><a href="/user/deployment/launchpad/">Launchpad</a></li>
        
          <li><a href="/user/deployment/modulus/">Modulus</a></li>
        
          <li><a href="/user/deployment/npm/">npm</a></li>
        
          <li><a href="/user/deployment/openshift/">OpenShift</a></li>
        
          <li><a href="/user/deployment/packagecloud/">packagecloud.io</a></li>
        
          <li><a href="/user/deployment/puppetforge/">Puppet Forge</a></li>
        
          <li><a href="/user/deployment/pypi/">PyPI</a></li>
        
          <li><a href="/user/deployment/cloudfiles/">Rackspace Cloud Files</a></li>
        
          <li><a href="/user/deployment/rubygems/">RubyGems</a></li>
        
          <li><a href="/user/deployment/scalingo/">Scalingo</a></li>
        
          <li><a href="/user/deployment/script/">Script</a></li>
        
          <li><a href="/user/deployment/surge/">Surge.sh</a></li>
        
          <li><a href="/user/deployment/testfairy/">TestFairy</a></li>
        
          <li><a href="/user/deployment/snaps/">Ubuntu Snap Store</a></li>
        
        <li><a href="/user/uploading-artifacts/">Uploading Build Artifacts</a></li>
      </ul>

      <h3>CI Environment Reference</h3>
      <ul>
      <li class="is-overview"><a href="/user/reference/overview/">Overview</a></li>
      <li><a href="/user/reference/precise/">Precise CI Environment Reference</a></li>
      <li><a href="/user/reference/trusty/">Trusty CI Environment</a><li>
      <li><a href="/user/reference/osx/">OS X CI Environment Reference</a></li>
      <li><a href="/user/multi-os/">Building on Multiple Operating Systems</a></li>
      <li><a href="/user/environment-variables/">Environment Variables</a></li>
      <li><a href="/user/precise-to-trusty-migration-guide/">Precise to Trusty Migration Guide</a></li>
      <li><a href="/user/build-environment-updates/">Build Environment Updates</a></li>
      <li><a href="/user/ip-addresses/">Build machines IP Addresses</a></li>
      </ul>

      <h3>Encrypting Files and Data</h3>
      <ul>
        <li><a href="/user/encryption-keys/">Encrypting Sensitive Data</a></li>
        <li><a href="/user/encrypting-files/">Encrypting Files</a></li>
        <li><a href="/user/github-oauth-scopes/">GitHub Permissions used by Travis CI</a></li>
        <li><a href="/user/best-practices-security/">Best Practices in Securing Your Data</a></li>
      </ul>

      <h3>Beta Features</h3>
      <ul>
        <li><a href="/user/build-stages/">Build Stages</a></li>
        <li><a href="/user/conditional-builds-stages-jobs/">Conditional Builds, Stages, and Jobs</a></li>
      </ul>

      <h3>Integrations and Notifications</h3>
      <ul>
        <li><a href="/user/notifications/">Configuring Notifications</a></li>
        <li><a href="/user/status-images/">Showing Build Status Images</a></li>
        <li><a href="/user/code-climate/">Code Climate</a></li>
        <li><a href="/user/coveralls/">Coveralls</a></li>
        <li><a href="/user/coverity-scan/">Coverity Scan</a></li>
        <li><a href="/user/browserstack/">BrowserStack</a></li>
        <li><a href="/user/sauce-connect/">Sauce Labs</a></li>
        <li><a href="/user/sonarcloud/">SonarCloud</a></li>
        <li><a href="/user/sourceclear/">SourceClear</a></li>
        <li><a href="/user/build-feeds/">Atom Feeds</a></li>
        <li><a href="/user/cc-menu/">CCMenu / CCTray Feeds</a></li>
        <li><a href="/user/integration/platformio/">Embedded Builds with PlatformIO</a></li>
      </ul>

      <h3>Developer Program</h3>
      <ul>
        <li class="is-overview"><a href="/user/developer/">Overview</a></li>
        <li><a href="http://developer.travis-ci.com/">API V3</a></li>
        <li><a href="/user/triggering-builds/">Triggering Builds with API V3</a></li>
        <li><a href="https://github.com/travis-ci/travis#ruby-library">The Ruby Library</a></li>
      </ul>
      <h3>3rd Party Tools and Resources</h3>
      <ul>
        <li><a href="/user/apps/">Apps, Clients and Tools</a></li>
        <li><a href="https://scan.coverity.com/travis_ci">Coverity Scan</a></li>
      </ul>
      <h3>Travis CI Enterprise</h3>
      <ul>
        <li><a href="/user/enterprise/">Enterprise Docs</a></li>
      </ul>
      <h3>Legal</h3>
      <ul>
        <li><a href="/legal/security/">Security</a></li>
        <li><a href="/legal/terms-conditions/">Terms and Conditions</a></li>
      </ul>
    </nav>
  </section>

  <section class="sidebar-notice">
    <p>This documentation site is open source.
      The <a href="https://github.com/travis-ci/docs-travis-ci-com">README in our Git repository</a> explains how to contribute.</p>
  </section>

</div><!-- /#sidebar -->


        <main id="main" class="main" data-swiftype-index='true'>
          
            <aside class="improve-page" data-swiftype-index='false'><a href="https://github.com/travis-ci/docs-travis-ci-com/edit/master/user/languages/clojure.md" target="_blank" title="Edit this page on GitHub" class="button-pen" data-proofer-ignore>Improve this page on GitHub</a></aside>
            <h1 class="title">Building a Clojure project</h1>
          
          <div id="toc">
</div>

<aside class="ataglance">

  <table>
    <thead>
      <tr>
        <th style="text-align: left">Clojure</th>
        <th style="text-align: left">Default</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td style="text-align: left"><a href="#Dependency-Management">Default <code class="highlighter-rouge">install</code></a></td>
        <td style="text-align: left"><code class="highlighter-rouge">project.clj</code></td>
      </tr>
      <tr>
        <td style="text-align: left"><a href="#Default-Build-Script">Default <code class="highlighter-rouge">script</code></a></td>
        <td style="text-align: left"><code class="highlighter-rouge">lein test</code></td>
      </tr>
      <tr>
        <td style="text-align: left"><a href="#Build-Matrix">Matrix keys</a></td>
        <td style="text-align: left"><code class="highlighter-rouge">env</code>, <code class="highlighter-rouge">lein</code>, <code class="highlighter-rouge">jdk</code></td>
      </tr>
      <tr>
        <td style="text-align: left">Support</td>
        <td style="text-align: left"><a href="mailto:support@travis-ci.com">Travis CI</a></td>
      </tr>
    </tbody>
  </table>

  <p>Minimal example:</p>

  <div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">language</span><span class="pi">:</span> <span class="s">clojure</span>
</code></pre></div>  </div>

</aside>

<h2 id="what-this-guide-covers">What This Guide Covers</h2>

<blockquote>
  <p>Language versions and other build-environment specific
information are in our reference pages:</p>
  <ul>
    <li><a href="/user/reference/precise/">Precise</a></li>
    <li><a href="/user/reference/trusty/">Trusty</a></li>
  </ul>
</blockquote>

<p>This guide covers build environment and configuration topics specific to Clojure
projects. Please make sure to read our <a href="/user/getting-started/">Getting Started</a>
and <a href="/user/customizing-the-build/">general build configuration</a> guides first.</p>

<p>Clojure builds are not available on the OS X environment.</p>

<h2 id="ci-environment-for-clojure-projects">CI Environment for Clojure Projects</h2>

<p>Travis CI environment provides a large set of build tools for JVM languages with
<a href="/user/languages/java/#Overview">multiple JDKs, Ant, Gradle, Maven</a> and both
<a href="http://leiningen.org">Leiningen</a> 1.7.x and 2.4.x (default).</p>

<h2 id="dependency-management">Dependency Management</h2>

<p>If you use Leiningen, it will automatically install any dependencies that are
listed in the <code class="highlighter-rouge">project.clj</code> file.</p>

<h3 id="alternate-install-step">Alternate Install Step</h3>

<p>If you need to install other dependencies before your tests can run, you should
set up the proper <code class="highlighter-rouge">:hooks</code> in <code class="highlighter-rouge">project.clj</code>.</p>

<p>If for some reason you can’t use hooks,you can override the install step in your
<code class="highlighter-rouge">.travis.yml</code>:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">install</span><span class="pi">:</span> <span class="s">lein protobuf install</span>
</code></pre></div></div>

<p>See the <a href="/user/customizing-the-build/">build configuration guide</a> to learn more.</p>

<h2 id="default-build-script">Default Build Script</h2>

<p>The default build script is:</p>

<div data-file=".travis.yml" class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>lein <span class="nb">test</span>
</code></pre></div></div>

<p>Projects that find this sufficient can use a very minimalistic .travis.yml file:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">language</span><span class="pi">:</span> <span class="s">clojure</span>
</code></pre></div></div>

<h3 id="using-midje">Using Midje</h3>

<p>If your project uses <a href="https://github.com/marick/Midje">Midje</a>, make sure
<a href="https://github.com/marick/Midje/wiki/Lein-midje">lein-midje</a> is on your
<code class="highlighter-rouge">project.clj</code> development dependencies list and override <code class="highlighter-rouge">script:</code> in
<code class="highlighter-rouge">.travis.yml</code> to run the Midje task:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">script</span><span class="pi">:</span> <span class="s">lein midje</span>
</code></pre></div></div>

<p>For Leiningen 1 add <code class="highlighter-rouge">:dev-dependencies</code> to <code class="highlighter-rouge">project.clj</code>:</p>

<div data-file=".project.clj" class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>:dev-dependencies [[midje "1.4.0"]
                   [lein-midje "1.0.10"]])
</code></pre></div></div>

<p>Leiningen 2 replaces <code class="highlighter-rouge">:dev-dependencies</code> with profiles:</p>

<div data-file=".project.clj" class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>:profiles {:dev {:dependencies [[midje "1.6.3"]]
                 :plugins [[lein-midje "3.0.0"]]}}
</code></pre></div></div>

<p>Please note that for projects that only support Clojure 1.3.0 and later
versions, you may need to exclude transient <code class="highlighter-rouge">org.clojure/clojure</code> for Midje in
project.clj:</p>

<div data-file=".project.clj" class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>:dev-dependencies [[midje "1.4.0" :exclusions [org.clojure/clojure]]
                   [lein-midje "1.0.10"]])
</code></pre></div></div>

<p>For real world example, see <a href="https://github.com/reiddraper/knockbox">Knockbox</a>.</p>

<h3 id="using-speclj-on-travis-ci">Using Speclj on Travis CI</h3>

<p>If your project uses <a href="https://github.com/slagyr/speclj">Speclj</a>, make sure it is
listed in your development dependencies in <code class="highlighter-rouge">project.clj</code>, and include this
<code class="highlighter-rouge">script:</code> line in <code class="highlighter-rouge">.travis.yml</code>:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">script</span><span class="pi">:</span> <span class="s">lein spec</span>
</code></pre></div></div>

<p>For Leiningen 1, Speclj should be listed under <code class="highlighter-rouge">:dev-dependencies</code> in <code class="highlighter-rouge">project.clj</code>:</p>

<div data-file=".project.clj" class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>:dev-dependencies [[speclj "3.3.1"]]
</code></pre></div></div>

<p>Leiningen 2 replaces <code class="highlighter-rouge">:dev-dependencies</code> with profiles:</p>

<div data-file=".project.clj" class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>:profiles {:dev {:dependencies [[speclj "3.3.1"]]}}
</code></pre></div></div>

<h2 id="using-leiningen-1">Using Leiningen 1</h2>

<p>Leiningen 1 is provided side by side with 2.4.x. To use it, specify <code class="highlighter-rouge">lein</code> key in <code class="highlighter-rouge">.travis.yml</code>:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">lein</span><span class="pi">:</span> <span class="s">lein1</span>
</code></pre></div></div>

<p>In case you need to use <code class="highlighter-rouge">lein</code> binary in <code class="highlighter-rouge">before_script</code>, <code class="highlighter-rouge">install:</code>, <code class="highlighter-rouge">script:</code> commands and so on, use <code class="highlighter-rouge">lein1</code>:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">before_install</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">lein1 bootstrap</span>
</code></pre></div></div>

<p>Task chaining requires using the <code class="highlighter-rouge">do</code> task:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">script</span><span class="pi">:</span> <span class="s">lein1 do javac, test</span>
</code></pre></div></div>

<h2 id="testing-against-multiple-jdks">Testing Against Multiple JDKs</h2>

<p>As for any JVM language, it is also possible to <a href="/user/languages/java/#Testing-Against-Multiple-JDKs">test against multiple JDKs</a>.</p>

<h3 id="examples">Examples</h3>

<ul>
  <li><a href="https://github.com/michaelklishin/monger/blob/master/.travis.yml">Monger</a></li>
  <li><a href="https://github.com/michaelklishin/welle/blob/master/.travis.yml">Welle</a></li>
  <li><a href="https://github.com/michaelklishin/langohr/blob/master/.travis.yml">Langohr</a></li>
  <li><a href="https://github.com/michaelklishin/neocons/blob/master/.travis.yml">Neocons</a></li>
</ul>

<h2 id="testing-against-multiple-versions-of-clojure">Testing Against Multiple Versions of Clojure</h2>

<h3 id="with-leiningen-1">With Leiningen 1</h3>

<p>Leiningen has an excellent plugin called <a href="https://github.com/maravillas/lein-multi">lein-multi</a> that lets you effortlessly test against multiple versions of
Clojure (for example, 1.3, 1.4 and alphas/betas/snapshots of the most recent development version). Because leiningen can run tests against any version of Clojure (not necessary the same version as Leiningen itself uses),
there is no need for runtime switchers (like RVM) for Clojure.</p>

<p>To use lein-multi on Travis CI, add it to <code class="highlighter-rouge">:plugins</code> in project.clj (note, this feature is only available starting with Leiningen 1.7.0) and
override <code class="highlighter-rouge">script:</code> to run <code class="highlighter-rouge">lein multi test</code> instead of default <code class="highlighter-rouge">lein test</code>:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">language</span><span class="pi">:</span> <span class="s">clojure</span>
<span class="na">script</span><span class="pi">:</span> <span class="s">lein1 multi test</span>
</code></pre></div></div>

<p>For a real world example, see <a href="https://github.com/michaelklishin/monger">Monger</a>.</p>

<h3 id="with-leiningen-2">With Leiningen 2</h3>

<p>Leiningen 2 has a core feature that replaces <code class="highlighter-rouge">lein-multi</code>: <a href="https://github.com/technomancy/leiningen/blob/master/doc/TUTORIAL.md">Profiles</a>. To run your tests against
multiple profiles (and thus, multiple dependency sets or Clojure versions), use <code class="highlighter-rouge">lein with-profile</code> command like so:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">lein</span><span class="pi">:</span> <span class="s">lein</span>
<span class="na">script</span><span class="pi">:</span> <span class="s">lein with-profile dev:1.4 test</span>
</code></pre></div></div>

<p>where <code class="highlighter-rouge">dev:1.4</code> is a colon-separated list of profiles to run <code class="highlighter-rouge">test</code> task against. Use <code class="highlighter-rouge">lein profiles</code> to list your project’s profiles
and <code class="highlighter-rouge">lein help with-profile</code> to learn more about the <code class="highlighter-rouge">with-profiles</code> task.</p>

<h4 id="using-a-more-recent-versions-of-leiningen">Using a more recent versions of Leiningen</h4>

<p>If your Clojure project requires a more recent version of Leiningen, you can specify it with:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">language</span><span class="pi">:</span> <span class="s">clojure</span>

<span class="na">lein</span><span class="pi">:</span> <span class="s">2.6.1</span> <span class="c1"># version 2 and up</span>
</code></pre></div></div>

<p>The job will install the specified version of Leiningen if it is not pre-installed,
and move on to install your project’s dependencies.</p>

<h3 id="example">Example</h3>

<p>For a real world example, see <a href="https://github.com/michaelklishin/neocons">Neocons</a>.</p>

<h2 id="build-matrix">Build Matrix</h2>

<p>For Clojure projects, <code class="highlighter-rouge">env</code>, <code class="highlighter-rouge">lein</code>, and <code class="highlighter-rouge">jdk</code> can be given as arrays
to construct a build matrix.</p>

<h2 id="examples-1">Examples</h2>

<ul>
  <li><a href="https://github.com/michaelklishin/monger/blob/master/.travis.yml">monger’s .travis.yml</a></li>
  <li><a href="https://github.com/michaelklishin/welle/blob/master/.travis.yml">welle’s .travis.yml</a></li>
  <li><a href="https://github.com/michaelklishin/langohr/blob/master/.travis.yml">langohr’s .travis.yml</a></li>
  <li><a href="https://github.com/michaelklishin/neocons/blob/master/.travis.yml">neocons’ .travis.yml</a></li>
  <li><a href="https://github.com/reiddraper/knockbox/blob/master/.travis.yml">Knockbox’s .travis.yml</a></li>
  <li><a href="https://github.com/reiddraper/sumo/blob/master/.travis.yml">Sumo’s .travis.yml</a></li>
</ul>

        </main>
      </div><!-- /#content -->

      <footer class="footer">
  <div class="inner row">
    <div class="footer-elem">
      <div class="travis-footer">
        <img alt="The Travis CI logo" src="/images/ui/footer-logo.svg"></div>
    </div>

    <div class="footer-elem">
      <h3 class="footer-title">&copy;Travis CI, GmbH</h3>
      <address>Rigaer Straße 8<br>10247 Berlin, Germany</address>
      <ul>
        <li><a href="https://docs.travis-ci.com/imprint.html" title="Imprint">Imprint</a></li>
        <li><a href="https://travisci.workable.com/" title="Jobs at Travis CI">Jobs</a></li>
      </ul>
    </div>

    <div class="footer-elem">
      <h3 class="footer-title">Help</h3>
      <ul>
        <li><a href="https://docs.travis-ci.com" title="Travis CI Docs">Documentation</a></li>
        <li><a href="https://blog.travis-ci.com/" title="Travis CI Blog">Blog</a></li>
        <li><a href="mailto:support@travis-ci.com" title="Email Travis CI support">Email</a></li>
        <li><a href="https://twitter.com/travisci" title="Travis CI on Twitter">Twitter</a></li>
      </ul>
    </div>

    <div class="footer-elem">
      <h3 class="footer-title">Travis CI Status</h3>
      <ul>
        <li><div class="status-circle status">Status:</div>
          <a href="http://www.traviscistatus.com/">Travis CI Status</a>
        </li>
      </ul>
    </div>
  </div>
</footer>

    </div><!-- /.wrapper -->
  </body>
</html>
